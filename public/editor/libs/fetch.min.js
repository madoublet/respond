(function(){if(self.fetch){return}function h(q){if(typeof q!=="string"){q=String(q)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(q)){throw new TypeError("Invalid character in header field name")}return q.toLowerCase()}function f(q){if(typeof q!=="string"){q=String(q)}return q}function o(q){this.map={};if(q instanceof o){q.forEach(function(s,r){this.append(r,s)},this)}else{if(q){Object.getOwnPropertyNames(q).forEach(function(r){this.append(r,q[r])},this)}}}o.prototype.append=function(q,s){q=h(q);s=f(s);var r=this.map[q];if(!r){r=[];this.map[q]=r}r.push(s)};o.prototype["delete"]=function(q){delete this.map[h(q)]};o.prototype.get=function(r){var q=this.map[h(r)];return q?q[0]:null};o.prototype.getAll=function(q){return this.map[h(q)]||[]};o.prototype.has=function(q){return this.map.hasOwnProperty(h(q))};o.prototype.set=function(q,r){this.map[h(q)]=[f(r)]};o.prototype.forEach=function(r,q){Object.getOwnPropertyNames(this.map).forEach(function(s){this.map[s].forEach(function(t){r.call(q,t,s,this)},this)},this)};function k(q){if(q.bodyUsed){return Promise.reject(new TypeError("Already read"))}q.bodyUsed=true}function j(q){return new Promise(function(s,r){q.onload=function(){s(q.result)};q.onerror=function(){r(q.error)}})}function g(r){var q=new FileReader();q.readAsArrayBuffer(r);return j(q)}function p(r){var q=new FileReader();q.readAsText(r);return j(q)}var m={blob:"FileReader" in self&&"Blob" in self&&(function(){try{new Blob();return true}catch(q){return false}})(),formData:"FormData" in self};function l(){this.bodyUsed=false;this._initBody=function(q){this._bodyInit=q;if(typeof q==="string"){this._bodyText=q}else{if(m.blob&&Blob.prototype.isPrototypeOf(q)){this._bodyBlob=q}else{if(m.formData&&FormData.prototype.isPrototypeOf(q)){this._bodyFormData=q}else{if(!q){this._bodyText=""}else{throw new Error("unsupported BodyInit type")}}}}};if(m.blob){this.blob=function(){var q=k(this);if(q){return q}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}}};this.arrayBuffer=function(){return this.blob().then(g)};this.text=function(){var q=k(this);if(q){return q}if(this._bodyBlob){return p(this._bodyBlob)}else{if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}}else{this.text=function(){var q=k(this);return q?q:Promise.resolve(this._bodyText)}}if(m.formData){this.formData=function(){return this.text().then(a)}}this.json=function(){return this.text().then(JSON.parse)};return this}var e=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function i(r){var q=r.toUpperCase();return(e.indexOf(q)>-1)?q:r}function c(r,s){s=s||{};var q=s.body;if(c.prototype.isPrototypeOf(r)){if(r.bodyUsed){throw new TypeError("Already read")}this.url=r.url;this.credentials=r.credentials;if(!s.headers){this.headers=new o(r.headers)}this.method=r.method;this.mode=r.mode;if(!q){q=r._bodyInit;r.bodyUsed=true}}else{this.url=r}this.credentials=s.credentials||this.credentials||"omit";if(s.headers||!this.headers){this.headers=new o(s.headers)}this.method=i(s.method||this.method||"GET");this.mode=s.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&q){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(q)}c.prototype.clone=function(){return new c(this)};function a(q){var r=new FormData();q.trim().split("&").forEach(function(s){if(s){var u=s.split("=");var t=u.shift().replace(/\+/g," ");var v=u.join("=").replace(/\+/g," ");r.append(decodeURIComponent(t),decodeURIComponent(v))}});return r}function d(s){var q=new o();var r=s.getAllResponseHeaders().trim().split("\n");r.forEach(function(w){var u=w.trim().split(":");var t=u.shift().trim();var v=u.join(":").trim();q.append(t,v)});return q}l.call(c.prototype);function b(r,q){if(!q){q={}}this._initBody(r);this.type="default";this.status=q.status;this.ok=this.status>=200&&this.status<300;this.statusText=q.statusText;this.headers=q.headers instanceof o?q.headers:new o(q.headers);this.url=q.url||""}l.call(b.prototype);b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})};b.error=function(){var q=new b(null,{status:0,statusText:""});q.type="error";return q};var n=[301,302,303,307,308];b.redirect=function(r,q){if(n.indexOf(q)===-1){throw new RangeError("Invalid status code")}return new b(null,{status:q,headers:{location:r}})};self.Headers=o;self.Request=c;self.Response=b;self.fetch=function(q,r){return new Promise(function(u,t){var s;if(c.prototype.isPrototypeOf(q)&&!r){s=q}else{s=new c(q,r)}var w=new XMLHttpRequest();function v(){if("responseURL" in w){return w.responseURL}if(/^X-Request-URL:/m.test(w.getAllResponseHeaders())){return w.getResponseHeader("X-Request-URL")}return}w.onload=function(){var y=(w.status===1223)?204:w.status;if(y<100||y>599){t(new TypeError("Network request failed"));return}var z={status:y,statusText:w.statusText,headers:d(w),url:v()};var x="response" in w?w.response:w.responseText;u(new b(x,z))};w.onerror=function(){t(new TypeError("Network request failed"))};w.open(s.method,s.url,true);if(s.credentials==="include"){w.withCredentials=true}if("responseType" in w&&m.blob){w.responseType="blob"}s.headers.forEach(function(y,x){w.setRequestHeader(x,y)});w.send(typeof s._bodyInit==="undefined"?null:s._bodyInit)})};self.fetch.polyfill=true})();